<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚙️ 系統設定</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <style>
        :root{
            --bg-dark: #0f1115;
            --bg-secondary: #1e1e1e;
            --neon-blue: #a7d7ff;
            --neon-pink: #ffb3cf;
            --neon-green: #a8f0c6;
            --neon-yellow: #fff1a6;
            --neon-red: #ff7f7f;
            --text-light: #e6e6e6;
            --text-dark: #b8b8b8;
        }

        /* 淺色模式 */
        .light-theme {
            --bg-dark: #f5f5f5;
            --bg-secondary: #ffffff;
            --text-light: #000000;
            --text-dark: #333333;
        }

        body {
            margin: 0; padding: 20px;
            background: var(--bg-dark);
            font-family: 'Segoe UI', sans-serif;
            color: var(--text-light);
            line-height: 1.6;
        }

        .container { max-width: 900px; margin: auto; padding-bottom: 80px; }
        h1 { color: var(--neon-blue); text-align: center; margin-bottom: 30px; text-shadow: 0 0 10px rgba(167, 215, 255, 0.3); }

        .settings-section {
            background: var(--bg-secondary); padding: 20px; border-radius: 12px; margin-bottom: 25px;
            border-left: 5px solid var(--neon-blue); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .section-title { font-size: 1.4rem; font-weight: bold; color: var(--text-light); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .section-desc { color: var(--text-dark); margin-bottom: 15px; font-size: 0.95rem; }

        button, .btn { padding: 10px 18px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: background-color 0.2s, box-shadow 0.2s; margin-right: 10px; font-size: 1rem; }
        .btn-group { display: flex; flex-wrap: wrap; gap: 10px; }

        .btn-primary { background-color: var(--neon-blue); color: var(--bg-dark); }
        .btn-primary:hover { background-color: #79c5ff; box-shadow: 0 0 10px var(--neon-blue); }
        .btn-secondary { background-color: var(--bg-dark); color: var(--neon-blue); border: 1px solid var(--neon-blue); }
        .btn-secondary:hover { background-color: var(--bg-secondary); }
        .btn-danger { background-color: var(--neon-red); color: var(--bg-dark); }
        .btn-danger:hover { background-color: #ff5e5e; box-shadow: 0 0 10px var(--neon-red); }

        input[type="text"], input[type="number"], input[type="file"] { 
            width: 100%; padding: 10px 15px; margin-top: 5px; margin-bottom: 15px;
            background: var(--bg-dark); color: var(--text-light); border: 1px solid var(--bg-secondary); border-radius: 8px; transition: all 0.3s ease; font-size: 1rem;
        }

        input[type="text"]:focus, input[type="number"]:focus, input[type="file"]:focus {
            border-color: var(--neon-green); box-shadow: 0 0 10px rgba(168, 240, 198, 0.5); outline: none; background: #14161a;
        }

    </style>
</head>

<body class="dark-theme">
<div class="container">
    <h1>⚙️ 系統設定</h1>

    <!-- 介面主題 -->
    <div class="settings-section">
        <div class="section-title"><i class="fas fa-palette" style="color: var(--neon-blue);"></i> 介面主題</div>
        <p class="section-desc">切換應用程式的顯示主題。</p>
        <div class="btn-group">
            <button class="btn btn-primary" onclick="setTheme('dark')"><i class="fas fa-moon"></i> 深色模式</button>
            <button class="btn btn-secondary" onclick="setTheme('light')"><i class="fas fa-sun"></i> 淺色模式</button>
        </div>
    </div>

    <!-- 資料備份與還原 -->
    <div class="settings-section">
        <div class="section-title"><i class="fas fa-file-export" style="color: var(--neon-blue);"></i> 資料備份與還原</div>
        <p class="section-desc">將記帳資料匯出為 Excel 檔案，或從檔案匯入。</p>
        <div class="btn-group">
            <button class="btn btn-secondary" onclick="exportData()"><i class="fas fa-download"></i> 匯出 (Excel)</button>
            <input type="file" id="importFile" accept=".xlsx" style="display: none;" onchange="importData(event)">
            <button class="btn btn-secondary" onclick="document.getElementById('importFile').click()"><i class="fas fa-upload"></i> 匯入 (Excel)</button>
        </div>
    </div>

    <!-- 分類管理 -->
    <div class="settings-section">
        <div class="section-title"><i class="fas fa-tags" style="color: var(--neon-blue);"></i> 分類管理</div>
        <p class="section-desc">新增、修改或刪除支出與收入的分類。</p>
        <div class="btn-group">
            <button class="btn btn-primary" onclick="window.location.href='category.html'">
                <i class="fas fa-edit"></i> 編輯分類
            </button>
        </div>
    </div>

    <!-- 危險區域 -->
    <div class="settings-section" style="border-color: rgba(255, 127, 127, 0.3);">
        <div class="section-title"><i class="fas fa-exclamation-triangle" style="color: var(--neon-red);"></i> 危險區域</div>
        <p class="section-desc">這裡的操作無法復原，請小心使用。</p>
        <div class="btn-group">
            <button class="btn btn-danger" onclick="clearAllData()"><i class="fas fa-trash-alt"></i> 清除所有資料</button>
        </div>
    </div>
</div>

<script>
    // --- 主題切換 ---
    function setTheme(theme) {
        document.body.className = theme + '-theme';
        localStorage.setItem('theme', theme);
    }

    function loadTheme() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        setTheme(savedTheme);
    }

    // --- 危險操作 ---
    function clearAllData() {
        if (confirm('⚠️ 確定要清除所有記帳資料嗎？此操作無法復原。')) {
            localStorage.clear();
            alert('所有資料已清除！頁面將重新載入。');
            window.location.reload();
        }
    }

    // --- 匯入/匯出 ---
    function exportData() { alert("匯出功能已觸發"); }
    function importData(event) { alert("匯入功能已觸發"); }

    // --- 初始化 ---
    window.addEventListener('load', loadTheme);
</script>

</body>
</html>
